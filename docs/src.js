webpackJsonp([0],{122:function(t,e,i){t.exports=i(123)},123:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(124),n=(i.n(s),i(21)),o=i.n(n),a=i(125),r=i(126),c=i(127);i(134);const h=document.getElementById("main"),l=document.getElementById("error"),u=document.getElementById("start"),f=new a.a(h),y=new r.a;o.a.UserMedia.supported?u.addEventListener("click",()=>{y.setup(f),u.classList.add("start--clicked"),function(){const t={initialNote:48*Math.random()+48,playNoteOffset:7*(Math.floor(3*Math.random())-1)},e=new c.a(t,y.gain);y.setAgent(e)}()}):l.classList.add("error--visible")},124:function(t,e){},125:function(t,e,i){"use strict";const s="screen--flash";e.a=class{constructor(t,e){this.elem=t,this.timeout=null}setToColor(t){this.elem.style.backgroundColor="rgba("+t.join(",")+", 1)"}flash(t=100){this.timeout&&clearTimeout(this.timeout),this.elem.classList.add(s),this.timeout=setTimeout(()=>{this.elem.classList.remove(s)},t)}}},126:function(t,e,i){"use strict";var s=i(21),n=i.n(s);const o=20;e.a=class{setup(){return this.startTime=Date.now(),this.mic=new n.a.UserMedia,this.analyser=new n.a.Waveform(512),this.gain=new n.a.Volume,this.mic.connect(this.gain),this.gain.connect(this.analyser),this.mic.open(),this.update(),!0}close(){this.mic.close()}setAgent(t){this.agent=t,this.agent.start()}update(){setTimeout(()=>{if(!this.agent)return;const t=this.analyser.getValue(),e=Date.now()-this.startTime;this.agent.update(t,e,this.gain),this.update()},o)}}},127:function(t,e,i){"use strict";var s=i(21),n=i.n(s),o=i(64);i.n(o);const a={filterQ:1,filterRange:7,filterRolloff:-48,gainLFOFrequency:.1,initialNote:72,velocity:.005,velocityRange:1},r=new n.a.Frequency;e.a=class{constructor(t,e){this.options=Object.assign({},a,t),this.synth=new n.a.Synth({oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:1,release:1}}),this.synthGainNode=new n.a.Gain,this.synthGainNode.toMaster(),this.synth.connect(this.synthGainNode),this.currentNote=this.options.initialNote,this.currentVelocity=this.options.velocity,this.filterLeft=new n.a.Filter({frequency:440,type:"bandpass",rolloff:this.options.filterRolloff,Q:this.options.filterQ,gain:0}),this.filterRight=new n.a.Filter({frequency:440,type:"bandpass",rolloff:this.options.filterRolloff,Q:this.options.filterQ,gain:0}),this.meterLeft=new n.a.Meter,this.meterRight=new n.a.Meter,e.connect(this.filterLeft),e.connect(this.filterRight),this.filterLeft.connect(this.meterLeft),this.filterRight.connect(this.meterRight),this.setFilterPoles(this.options.initialNote),this.gainLFO=new n.a.LFO(this.options.gainLFOFrequency,0,1),this.gainLFO.connect(this.synthGainNode.gain)}start(){this.synth.triggerAttack(r.midiToFrequency(this.options.initialNote)),this.gainLFO.start()}setFilterPoles(t){const{filterRange:e}=this.options,i=r.midiToFrequency(t-e),s=r.midiToFrequency(t+e);this.filterLeft.frequency.setValueAtTime(i,"+0"),this.filterRight.frequency.setValueAtTime(s,"+0")}update(t,e,i){const s=this.meterLeft.getLevel(),n=this.meterRight.getLevel(),a=this.filterLeft.frequency.value,c=this.filterRight.frequency.value;if(Object(o.a)(a),Object(o.a)(c),!isFinite(n)||!isFinite(s))return;this.currentVelocity=Math.min(Math.max((n-s)*this.options.velocity,-this.options.velocityRange),this.options.velocityRange),this.currentNote+=this.currentVelocity,this.setFilterPoles(this.currentNote);const h=r.midiToFrequency(this.currentNote);this.synth.setNote(h)}}},134:function(t,e,i){"use strict";var s=i(21),n=(i.n(s),i(65));i.n(n)}},[122]);