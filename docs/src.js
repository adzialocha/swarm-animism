webpackJsonp([0],[,,function(t,e,i){t.exports=i(3)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=(i.n(s),i(0)),r=i.n(n),a=i(5),c=i(6),o=i(7);i(8);const h=document.getElementById("main"),l=document.getElementById("error"),u=document.getElementById("start"),m=new a.a(h),f=new c.a;r.a.UserMedia.supported?u.addEventListener("click",()=>{f.setup(m),u.classList.add("start--clicked"),function(){const t=new o.a(f.gain);f.setAgent(t)}()}):l.classList.add("error--visible")},function(t,e){},function(t,e,i){"use strict";const s="screen--flash";e.a=class{constructor(t,e){this.elem=t,this.timeout=null}setToColor(t){this.elem.style.backgroundColor="rgba("+t.join(",")+", 1)"}flash(t=100){this.timeout&&clearTimeout(this.timeout),this.elem.classList.add(s),this.timeout=setTimeout(()=>{this.elem.classList.remove(s)},t)}}},function(t,e,i){"use strict";var s=i(0),n=i.n(s);const r=20;e.a=class{setup(){return this.startTime=Date.now(),this.mic=new n.a.UserMedia,this.analyser=new n.a.Waveform(256),this.gain=new n.a.Volume,this.mic.connect(this.gain),this.gain.connect(this.analyser),this.mic.open(),this.update(),!0}close(){this.mic.close()}setAgent(t){this.agent=t,this.agent.start()}update(){setTimeout(()=>{if(!this.agent)return;const t=this.analyser.getValue(),e=Date.now()-this.startTime;this.agent.update(t,e,this.gain),this.update()},r,this)}}},function(t,e,i){"use strict";var s=i(0),n=i.n(s);const r=80,a=1,c=.025,o=new n.a.Frequency;e.a=class{constructor(t){this.synth=new n.a.Synth({oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:1,release:1}}).toMaster(),this.filterLeft=new n.a.Filter({frequency:o.midiToFrequency(r-a),type:"bandpass",rolloff:-24,Q:1,gain:0}),this.filterRight=new n.a.Filter({frequency:o.midiToFrequency(r+a),type:"bandpass",rolloff:-24,Q:1,gain:0}),this.lastMeterValue=0,this.currentNote=r,this.velocity=c,this.meterLeft=new n.a.Meter,this.meterRight=new n.a.Meter,t.connect(this.filterLeft),t.connect(this.filterRight),this.filterLeft.connect(this.meterLeft),this.filterRight.connect(this.meterRight)}onAnalysis(t){}start(){this.synth.triggerAttack(o.midiToFrequency(this.currentNote))}update(t,e,i){const s=this.meterLeft.getLevel(),n=this.meterRight.getLevel();this.velocity=s<n?c:-c;const r=o.midiToFrequency(this.currentNote);this.currentNote+=this.velocity,this.filterLeft.frequency.setValueAtTime(o.midiToFrequency(this.currentNote-a),"+0"),this.filterRight.frequency.setValueAtTime(o.midiToFrequency(this.currentNote+a),"+0"),this.synth.setNote(r)}}},function(t,e,i){"use strict";var s=i(0),n=(i.n(s),i(1));i.n(n)}],[2]);