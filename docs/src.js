webpackJsonp([0],{123:function(t,e,i){t.exports=i(124)},124:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(125),n=(i.n(s),i(21)),a=i.n(n),o=i(126),r=i(128),c=i(129),l=i(136),h=i(65),u=i(137),m=i.n(u);const f=document.getElementById("main"),y=document.getElementById("error"),g=document.getElementById("start"),d=new o.a(f);a.a.UserMedia.supported?(g.classList.add("start--visible"),g.addEventListener("click",()=>{!function(){const t=new r.a;t.setup(d);const e=Object(h.a)(m.a),{options:i}=e;let s;switch(d.setAnimal(e.name),e.agent){case"impulse":s=new l.a(i,d,t.gain);break;default:s=new c.a(i,d,t.gain)}t.setAgent(s)}(),g.classList.remove("start--visible")})):y.classList.add("error--visible")},125:function(t,e){},126:function(t,e,i){"use strict";var s=i(127);const n="screen--flash",a="screen--visible",o="background",r={test:i.n(s).a};e.a=class{constructor(t,e){this.elem=t,this.backgroundElem=document.getElementById(o),this.timeout=null}setToColor(t){this.elem.style.backgroundColor="rgba("+t.join(",")+", 1)"}setAnimal(t){this.elem.classList.add(a),this.backgroundElem.style.backgroundImage=`url(${r[t]})`}flash(t=100){this.timeout&&clearTimeout(this.timeout),this.elem.classList.add(n),this.timeout=setTimeout(()=>{this.elem.classList.remove(n)},t)}}},127:function(t,e,i){t.exports=i.p+"cf4f065071effea10aa7332960ff6446.png"},128:function(t,e,i){"use strict";var s=i(21),n=i.n(s);const a=20;e.a=class{setup(){return this.startTime=Date.now(),this.mic=new n.a.UserMedia,this.analyser=new n.a.Waveform(512),this.gain=new n.a.Volume,this.mic.connect(this.gain),this.gain.connect(this.analyser),this.mic.open(),this.update(),!0}close(){this.mic.close()}setAgent(t){this.agent=t,this.agent.start()}update(){setTimeout(()=>{if(!this.agent)return;const t=this.analyser.getValue(),e=Date.now()-this.startTime;this.agent.update(t,e,this.gain),this.update()},a)}}},129:function(t,e,i){"use strict";var s=i(21),n=i.n(s),a=i(64),o=(i.n(a),i(65));const r={filterQ:1,filterRange:7,filterRolloff:-48,minInitialNote:48,maxInitialNote:96,minLFOFrequency:.1,maxLFOFrequency:.5,minVelocity:.001,maxVelocity:.005,velocityRange:1,minVolume:.25,maxVolume:.9},c=new n.a.Frequency;e.a=class{constructor(t={},e,i){this.options=Object.assign({},r,t),this.synth=new n.a.Synth({oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:1,release:1}}),this.synthGainNode=new n.a.Gain,this.synthGainNode.toMaster(),this.synth.connect(this.synthGainNode),this.velocity=Object(o.b)(this.options.minVelocity,this.options.maxVelocity),this.initialNote=Object(o.b)(this.options.minInitialNote,this.options.maxInitialNote),this.currentNote=this.initialNote,this.currentVelocity=this.velocity,this.filterLeft=new n.a.Filter({frequency:440,type:"bandpass",rolloff:this.options.filterRolloff,Q:this.options.filterQ,gain:0}),this.filterRight=new n.a.Filter({frequency:440,type:"bandpass",rolloff:this.options.filterRolloff,Q:this.options.filterQ,gain:0}),this.meterLeft=new n.a.Meter,this.meterRight=new n.a.Meter,i.connect(this.filterLeft),i.connect(this.filterRight),this.filterLeft.connect(this.meterLeft),this.filterRight.connect(this.meterRight),this.setFilterPoles(this.initialNote);const s=Object(o.b)(this.options.minLFOFrequency,this.options.maxLFOFrequency);this.gainLFO=new n.a.LFO(s,this.options.minVolume,this.options.maxVolume),this.gainLFO.connect(this.synthGainNode.gain)}start(){this.synth.triggerAttack(c.midiToFrequency(this.initialNote)),this.gainLFO.start()}setFilterPoles(t){const{filterRange:e}=this.options,i=c.midiToFrequency(t-e),s=c.midiToFrequency(t+e);this.filterLeft.frequency.setValueAtTime(i,"+0"),this.filterRight.frequency.setValueAtTime(s,"+0")}update(t,e,i){const s=this.meterLeft.getLevel(),n=this.meterRight.getLevel(),o=this.filterLeft.frequency.value,r=this.filterRight.frequency.value;if(Object(a.a)(o),Object(a.a)(r),!isFinite(n)||!isFinite(s))return;this.currentVelocity=Math.min(Math.max((n-s)*this.velocity,-this.options.velocityRange),this.options.velocityRange),this.currentNote+=this.currentVelocity,this.setFilterPoles(this.currentNote);const l=c.midiToFrequency(this.currentNote);this.synth.setNote(l)}}},136:function(t,e,i){"use strict";var s=i(21),n=i.n(s),a=i(66),o=i.n(a);const r=.01,c=.001,l=[0,2];e.a=class{constructor(t={},e,i){this.visuals=e,this.meter=new n.a.Meter,this.synth=new n.a.PolySynth(1,n.a.Synth,{oscillator:{partials:[0,2,3,4,8]},envelope:{attack:.05,decay:.05,sustain:.1,release:.1}}).connect(this.meter),this.meter.toMaster()}start(){o.a.bufferSize=256}update(t,e,i){const s=o.a.extract(["rms","chroma"],t),{chroma:n,rms:a}=s,h=(n.reduce((t,e)=>t+e,0),n.length,n.reduce((t,e,i)=>(t.push({key:i,value:e}),t),[]).sort((t,e)=>e.value-t.value)),u=(l.reduce((t,e,i)=>t&&h[i].key==e,!0),Math.abs(this.meter.getValue()));i.mute=u>c,a>r&&(this.visuals.flash(),this.synth.triggerAttackRelease("C3",.1))}}},137:function(t,e){t.exports=[{name:"test",agent:"flocking",options:{filterQ:1,filterRange:7,filterRolloff:-48,minInitialNote:48,maxInitialNote:96,minLFOFrequency:.1,maxLFOFrequency:.5,minVelocity:.001,maxVelocity:.005,velocityRange:1,minVolume:.25,maxVolume:.9}}]},65:function(t,e,i){"use strict";e.b=function(t,e){return Math.random()*(e-t)+t},e.a=function(t){return t[Math.floor(Math.random()*t.length)]}}},[123]);